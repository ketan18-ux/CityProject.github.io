<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>DAA Portfolio ‚Äî Tejas B. Keri (Collapsible Sidebar, Light Mode, C++ Answers, Card UI)</title>

<!-- Fonts -->
<link href="https://fonts.googleapis.com/css2?family=JetBrains+Mono:wght@400;600;800&family=Poppins:wght@300;400;600;700&display=swap" rel="stylesheet">

<!-- Prism for syntax highlighting (light theme) -->
<link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" rel="stylesheet" />
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-clike.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-cpp.min.js"></script>

<style>
/* -----------------------------
   LIGHT THEME (ONLY) - STYLE 1 CARD UI
   ----------------------------- */
:root{
  --bg: #f4f7fb;
  --panel: #ffffff;
  --muted: #475569;
  --accent: #0ea5e9;
  --accent-2: #0284c7;
  --glass: rgba(2,6,23,0.04);
  --card-shadow: 0 10px 30px rgba(16,24,40,0.06);
  --radius: 18px;
  --trans-fast: 160ms;
  --trans: 220ms;
  --trans-slow: 360ms;
  --glow: 0 10px 30px rgba(14,165,233,0.06);
  --text: #0f1724;
  --muted-2: #6b7280;
  --code-bg: #f6f9fb;
  --code-text: #0f1724;
  --card-min-width: 360px;
}

/* -----------------------------
   BASE PAGE
   ----------------------------- */
html,body{
  height:100%;
  margin:0;
  font-family: "Poppins", system-ui, -apple-system, "Segoe UI", Roboto, "Helvetica Neue", Arial;
  background: linear-gradient(180deg, #f7fbfd 0%, #f4f7fb 100%);
  color: var(--text);
  transition: background var(--trans-slow) ease, color var(--trans-slow) ease;
  -webkit-font-smoothing:antialiased;
  -moz-osx-font-smoothing:grayscale;
  line-height:1.45;
  -webkit-tap-highlight-color: transparent;
  padding: 18px 12px;
  box-sizing: border-box;
}

/* -----------------------------
   HEADER
   ----------------------------- */
.top {
  max-width:1200px;
  margin: 10px auto;
  padding:18px;
  border-radius:18px;
  background: linear-gradient(90deg, rgba(255,255,255,0.96) 0%, rgba(250,250,250,0.96) 100%);
  box-shadow: var(--card-shadow);
  display:flex;
  align-items:center;
  justify-content:space-between;
  gap:20px;
}
.top-left h1{ margin:0; font-size:20px; color:var(--text); letter-spacing: -0.2px; font-weight:700; }
.badges{ display:flex; gap:8px; flex-wrap:wrap; margin-top:8px; }
.badge{
  background: rgba(2,6,23,0.03);
  border:1px solid rgba(2,6,23,0.03);
  padding:6px 10px;
  font-size:12px;
  color:var(--muted-2);
  border-radius:999px;
}
.badge strong{ color:var(--text); margin-right:6px; font-weight:600; }
.top-right{ display:flex; align-items:center; gap:14px; }
.home-btn{
  padding:10px 16px;
  background:linear-gradient(90deg,var(--accent),var(--accent-2));
  color:white;
  font-weight:700;
  border-radius:999px;
  text-decoration:none;
  box-shadow: 0 8px 20px rgba(2, 27, 37, 0.08);
}

/* -----------------------------
   LAYOUT
   ----------------------------- */
.container {
  max-width:1200px;
  margin: 18px auto 60px;
  display:grid;
  grid-template-columns: 1fr 3fr;
  gap:20px;
  align-items:start;
  padding: 0 12px;
}
@media (max-width: 980px){
  .container { grid-template-columns: 1fr; }
}

/* -----------------------------
   SIDEBAR (collapsible)
   ----------------------------- */
.sidebar {
  background: linear-gradient(180deg, rgba(255,255,255,0.98), rgba(255,255,255,0.99));
  border-radius: var(--radius);
  padding: 12px;
  max-height: calc(100vh - 140px);
  overflow:auto;
  box-shadow: var(--card-shadow);
  position: relative;
  transition: transform var(--trans) ease, opacity var(--trans) ease, width var(--trans) ease;
  z-index: 40;
}
@media (max-width: 980px){
  .sidebar {
    position: fixed;
    left: 12px;
    top: 86px;
    bottom: 12px;
    width: calc(100% - 24px);
    max-width: 420px;
    transform: translateX(-110%);
    opacity: 0;
    transition: transform var(--trans) ease, opacity var(--trans) ease;
  }
  .sidebar.open {
    transform: translateX(0);
    opacity: 1;
  }
}

/* sidebar inner */
.sidebar .sidebar-top {
  display:flex;
  align-items:center;
  justify-content:space-between;
  gap:10px;
}
.collapse-btn {
  border:0;
  background:transparent;
  padding:8px;
  border-radius:10px;
  cursor:pointer;
  display:inline-flex;
  align-items:center;
  justify-content:center;
}
.collapse-btn:focus { outline:2px solid rgba(14,165,233,0.18); }

/* search and controls */
.controls {
  display:flex;
  gap:8px;
  align-items:center;
  margin:10px 0 6px;
}
.search {
  flex:1;
  display:flex;
  align-items:center;
  gap:8px;
  background: rgba(2,6,23,0.04);
  padding:8px 10px;
  border-radius:999px;
  border:1px solid rgba(2,6,23,0.03);
  color:var(--muted-2);
}
.search input{
  background:transparent;
  border:0;
  outline:0;
  color:inherit;
  width:100%;
  font-size:13px;
}
.count-pill {
  font-size:13px;
  color:var(--muted-2);
  padding:6px 10px;
  border-radius:8px;
  background: rgba(2,6,23,0.03);
  white-space:nowrap;
}

/* -----------------------------
   CENTER (cards grid - STYLE 1)
   ----------------------------- */
.center {
  background: var(--panel);
  border-radius:var(--radius);
  padding:22px;
  min-height:72vh;
  overflow:auto;
  box-shadow:var(--card-shadow);
}
.center-header {
  display:flex;
  justify-content:space-between;
  align-items:center;
  gap:12px;
  margin-bottom:12px;
}
.center-header h2{ margin:0; font-size:20px; color:var(--text); }
.center .desc { color:var(--muted-2); margin:8px 0 12px; font-size:14px; }
.center .complexity { font-size:13px; color:var(--muted-2); margin-bottom:14px; }

/* card grid (main visible area, like screenshot) */
.problems-grid {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(var(--card-min-width), 1fr));
  gap:18px;
}

/* big snapshot card style matching screenshot */
.card {
  display:flex;
  gap:16px;
  align-items:flex-start;
  background: linear-gradient(180deg, rgba(255,255,255,0.98), #fff);
  border-radius:16px;
  padding:18px;
  box-shadow: 0 8px 30px rgba(16,24,40,0.06);
  border:1px solid rgba(2,6,23,0.03);
  transition: transform var(--trans) ease, box-shadow var(--trans) ease;
  min-height:120px;
}
.card:hover {
  transform: translateY(-6px);
  box-shadow: 0 18px 48px rgba(16,24,40,0.10);
}
.card .card-left {
  width:86px;
  min-width:86px;
  height:86px;
  border-radius:12px;
  display:flex;
  align-items:center;
  justify-content:center;
  font-size:28px;
  background: linear-gradient(180deg, rgba(14,165,233,0.06), rgba(14,165,233,0.02));
  border:1px solid rgba(14,165,233,0.06);
  box-shadow: var(--glow);
  color: var(--accent-2);
  flex-shrink:0;
}
.card .card-body {
  flex:1;
}
.card .card-body h3 {
  margin:0 0 6px 0;
  font-size:16px;
  color:var(--text);
}
.card .card-body p {
  margin:0 0 8px 0;
  color:var(--muted-2);
  font-size:13px;
}
.card .tags {
  display:flex;
  gap:8px;
  flex-wrap:wrap;
  margin-top:8px;
}
.card .tag {
  padding:6px 10px;
  font-size:12px;
  color:#034e5a;
  background: rgba(14,165,233,0.08);
  border-radius:999px;
  border:1px solid rgba(14,165,233,0.06);
}

/* small code preview on card right */
.card .card-right {
  width:180px;
  min-width:140px;
  font-family: "JetBrains Mono", monospace;
  font-size:12px;
  color:var(--muted-2);
  background: rgba(2,6,23,0.02);
  padding:10px;
  border-radius:10px;
  max-height:84px;
  overflow:hidden;
  text-overflow:ellipsis;
}

/* special bottom docs card */
.docs-card {
  display:flex;
  gap:16px;
  align-items:center;
  background: linear-gradient(90deg, rgba(14,165,233,0.03), rgba(2,132,199,0.02));
  border-radius:16px;
  padding:18px;
  box-shadow: 0 8px 24px rgba(14,165,233,0.04);
  border:1px solid rgba(14,165,233,0.08);
}

/* code block (detail panel when opened) */
pre { background: var(--code-bg) !important; padding:18px; border-radius:12px; overflow:auto; color:var(--code-text); }
code { font-family:"JetBrains Mono", monospace; font-size:13px; display:block; white-space:pre; color:var(--code-text); }

/* small screens */
@media (max-width: 880px){
  .container { grid-template-columns: 1fr; }
  .sidebar { position: fixed; left: 12px; top: 86px; bottom: 12px; width: calc(100% - 24px); max-width: 420px; transform: translateX(-110%); opacity: 0; }
  .center { margin-top: 12px; }
  .card { flex-direction: row; }
  .card .card-right { display:none; }
}
@media (max-width: 520px){
  .card { gap:12px; padding:12px; min-height:88px; }
  .card .card-left { width:64px; height:64px; font-size:22px; }
  .card .card-right { display:none; }
}

/* overlay to dim the page when sidebar is open on mobile */
#overlay {
  position: fixed;
  inset: 0;
  background: rgba(8,10,12,0.35);
  display: none;
  z-index: 30;
}
#overlay.visible { display: block; }

/* accessibility helper */
.sr-only{
  position:absolute!important;
  height:1px;width:1px;
  overflow:hidden;clip:rect(1px,1px,1px,1px);white-space:nowrap;border:0;padding:0;margin:-1px;
}
</style>
</head>

<body>

<!-- HEADER -->
<div class="top" role="banner">
  <div class="top-left">
    <h1>Smart City Infrastructure & Routing Design ‚Äî DAA Portfolio</h1>
    <div class="badges" aria-hidden="true">
      <span class="badge"><strong>Student:</strong> TEJAS.B.KERI</span>
      <span class="badge"><strong>Faculty:</strong> Prakash Hegade</span>
      <span class="badge"><strong>Course:</strong> Design & Analysis of Algorithms</span>
      <span class="badge"><strong>Focus:</strong> Land Use & Location Optimization</span>
    </div>
  </div>
  <div class="top-right">
    <span class="meta-pill">2024 ¬∑ DAA City Design</span>
    <a class="home-btn" href="#">‚Üê Back to Home</a>
  </div>
</div>

<!-- MAIN CONTAINER -->
<div class="container" role="main" aria-live="polite">

  <!-- SIDEBAR (collapsible on mobile) -->
  <aside id="sidebar" class="sidebar" aria-label="Controls & Filters">
    <div class="sidebar-top">
      <div style="display:flex;gap:8px;align-items:center;">
        <div>
          <strong style="font-size:13px;color:var(--text);display:block">Controls</strong>
          <small style="color:var(--muted-2);font-size:12px">Filter / open problem</small>
        </div>
      </div>
      <div class="count-pill" id="count">30 items</div>
    </div>

    <div class="controls" aria-hidden="false">
      <div class="search" role="search" aria-label="Search problems">
        <svg width="14" height="14" viewBox="0 0 24 24" fill="none" aria-hidden="true" style="opacity:0.9"><path d="M21 21l-4.35-4.35" stroke="currentColor" stroke-width="1.6" stroke-linecap="round" stroke-linejoin="round"/></svg>
        <input id="searchInput" type="text" placeholder="Search problems (title, id, SDG)..." aria-label="Search problems" />
      </div>
      <button id="closeSidebarBtn" class="collapse-btn" aria-label="Close sidebar" title="Close sidebar" style="display:none">
        <svg class="icon" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" aria-hidden="true">
          <path d="M6 6l12 12M6 18L18 6" stroke="currentColor" stroke-width="1.6" stroke-linecap="round" stroke-linejoin="round"/>
        </svg>
      </button>
    </div>

    <div style="margin-top:12px;">
      <strong style="font-size:13px;color:var(--text);display:block">Quick Jump</strong>
      <div style="margin-top:8px; display:flex; flex-direction:column; gap:8px;">
        <!-- Quick jump buttons will be injected by JS -->
        <div id="quickJump"></div>
      </div>
    </div>

    <div style="margin-top:16px;">
      <strong style="font-size:13px;color:var(--text);display:block">SDG Filters</strong>
      <div id="sdgFilters" style="margin-top:8px; display:flex; flex-wrap:wrap; gap:8px;"></div>
    </div>

    <div style="margin-top:16px;">
      <button id="resetBtn" style="width:100%;padding:10px;border-radius:10px;border:1px solid rgba(2,6,23,0.06);background:#fff;cursor:pointer;">Reset filters</button>
    </div>

  </aside>

  <!-- CENTER content -->
  <main class="center" id="center" tabindex="0" role="main">
    <div class="center-header">
      <div>
        <h2 id="problemTitle">Project Cases ‚Äî Smart City DAA</h2>
        <div class="desc" id="problemDesc">Click a card to open the problem code and details on the right (detail panel).</div>
      </div>
      <!-- hamburger for mobile -->
      <div style="display:flex;gap:8px;align-items:center;">
        <button id="hamburger" class="collapse-btn" aria-label="Open sidebar" title="Open sidebar">
          <svg class="icon" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" aria-hidden="true">
            <path d="M4 6h16M4 12h12M4 18h16" stroke="currentColor" stroke-width="1.6" stroke-linecap="round" stroke-linejoin="round"/>
          </svg>
        </button>
      </div>
    </div>

    <div id="gridWrap">
      <div class="problems-grid" id="problemsGrid" aria-live="polite"></div>
    </div>

    <div style="margin-top:18px;">
      <div class="docs-card" id="docsCard" role="region" aria-label="Technical docs">
        <div class="card-left" style="font-size:22px">üìÑ</div>
        <div style="flex:1">
          <h3 style="margin:0">Technical Docs & SDG Mapping</h3>
          <p style="margin:6px 0 0 0;color:var(--muted-2);font-size:13px">This portfolio lists algorithmic solutions (C++) and maps each to relevant SDGs. Use the filters to explore.</p>
          <div style="margin-top:8px;display:flex;gap:8px;flex-wrap:wrap">
            <span class="tag">Documentation</span>
            <span class="tag">SDG Mapping</span>
            <span class="tag">C++</span>
          </div>
        </div>
        <div style="width:120px;text-align:right;color:var(--muted-2);font-size:12px">v1.0 ‚Ä¢ DAA</div>
      </div>
    </div>

  </main>
</div>

<!-- Overlay for mobile sidebar -->
<div id="overlay" role="presentation" aria-hidden="true"></div>

<!-- DETAIL MODAL / PANEL (hidden by default) -->
<div id="detailPanel" style="position:fixed; right:14px; top:86px; bottom:14px; width:520px; max-width:92vw; background:var(--panel); border-radius:16px; box-shadow: 0 24px 80px rgba(16,24,40,0.12); padding:18px; overflow:auto; z-index:60; transform: translateX(110%); transition: transform var(--trans) ease, opacity var(--trans) ease;">
  <div style="display:flex;justify-content:space-between;align-items:center;gap:12px;margin-bottom:12px;">
    <div>
      <h3 id="detailTitle" style="margin:0;font-size:18px;color:var(--text)"></h3>
      <div id="detailMeta" style="font-size:13px;color:var(--muted-2);margin-top:6px"></div>
    </div>
    <div style="display:flex;gap:8px;align-items:center;">
      <button id="closeDetail" class="collapse-btn" title="Close" aria-label="Close detail panel">
        <svg class="icon" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" aria-hidden="true">
          <path d="M6 6l12 12M6 18L18 6" stroke="currentColor" stroke-width="1.6" stroke-linecap="round" stroke-linejoin="round"/>
        </svg>
      </button>
    </div>
  </div>
  <div id="detailDesc" style="color:var(--muted-2);font-size:14px;margin-bottom:12px"></div>
  <div id="detailSdgs" style="display:flex;gap:8px;flex-wrap:wrap;margin-bottom:12px"></div>
  <div style="font-size:13px;color:var(--muted-2);margin-bottom:12px" id="detailComplexity"></div>
  <pre id="detailCode"><code class="language-cpp" id="detailCodeInner">// code</code></pre>
</div>

<script>
/* ----------------------------------------------------
   GENERATED PROBLEM DATA (30 items) - ALL C++ code
   - This is a fresh generated portfolio (Option B)
   - Data is stable and not coming from the photo; photo only used for style reference
---------------------------------------------------- */
const problems = [
  // 1
  {
    id: 1,
    title: "Optimal Hospital Location",
    desc: "Place hospitals so that the total distance citizens travel is minimized.",
    complexity: "O(n log n) ‚Äî median method",
    sdgs: ["SDG 3: Good Health", "SDG 11: Sustainable Cities"],
    code: `// Hospital Location (1D median)
#include <bits/stdc++.h>
using namespace std;
double median_1d(vector<long long> pts){
    sort(pts.begin(), pts.end());
    int n = pts.size();
    if(n % 2 == 1) return pts[n/2];
    return (pts[n/2 - 1] + pts[n/2]) / 2.0;
}
int main(){
    vector<long long> pts = {1,5,9,3,8};
    cout << "Median: " << median_1d(pts) << '\\n';
    return 0;
}`
  },

  // 2
  {
    id: 2,
    title: "School Allocation to Students",
    desc: "Assign students to the nearest school under capacity constraints using Max-Flow.",
    complexity: "O(E sqrt(V)) ‚Äî Dinic",
    sdgs: ["SDG 4: Quality Education", "SDG 11: Sustainable Cities"],
    code: `// Dinic's Algorithm (C++)
#include <bits/stdc++.h>
using namespace std;
struct Edge{int to; long long cap; int rev;};
struct Dinic {
    int n; vector<vector<Edge>> g; vector<int> level, it;
    Dinic(int n):n(n),g(n),level(n),it(n){}
    void add_edge(int u,int v,long long c){
        g[u].push_back({v,c,(int)g[v].size()});
        g[v].push_back({u,0,(int)g[u].size()-1});
    }
    bool bfs(int s,int t){
        fill(level.begin(), level.end(), -1);
        queue<int>q; level[s]=0; q.push(s);
        while(!q.empty()){
            int u=q.front(); q.pop();
            for(auto &e:g[u]) if(e.cap>0 && level[e.to]==-1){ level[e.to]=level[u]+1; q.push(e.to); }
        }
        return level[t]!=-1;
    }
    long long dfs(int u,int t,long long f){
        if(u==t) return f;
        for(int &i=it[u]; i<(int)g[u].size(); ++i){
            Edge &e = g[u][i];
            if(e.cap>0 && level[e.to]==level[u]+1){
                long long ret = dfs(e.to,t,min(f,e.cap));
                if(ret>0){ e.cap -= ret; g[e.to][e.rev].cap += ret; return ret; }
            }
        }
        return 0;
    }
    long long max_flow(int s,int t){
        long long flow=0;
        while(bfs(s,t)){
            fill(it.begin(), it.end(), 0);
            while(true){ long long f = dfs(s,t,LLONG_MAX); if(f==0) break; flow+=f; }
        }
        return flow;
    }
};
int main(){ return 0; }`
  },

  // 3
  {
    id: 3,
    title: "Smart Parking Slot Allocation",
    desc: "Assign cars to slots minimizing walking distance using Hungarian Algorithm.",
    complexity: "O(n^3) ‚Äî Hungarian",
    sdgs: ["SDG 11: Sustainable Cities", "SDG 13: Climate Action"],
    code: `// Hungarian Algorithm (assignment) - 1-based internally
#include <bits/stdc++.h>
using namespace std;
vector<int> hungarian(const vector<vector<long long>>& a){
    int n = a.size();
    vector<long long> u(n+1), v(n+1);
    vector<int> p(n+1), way(n+1);
    for(int i=1;i<=n;++i){
        p[0]=i; int j0=0;
        vector<long long> minv(n+1, LLONG_MAX);
        vector<char> used(n+1,false);
        while(true){
            used[j0]=true; int i0 = p[j0];
            long long delta=LLONG_MAX; int j1=0;
            for(int j=1;j<=n;++j) if(!used[j]){
                long long cur = a[i0-1][j-1]-u[i0]-v[j];
                if(cur<minv[j]){ minv[j]=cur; way[j]=j0; }
                if(minv[j]<delta){ delta=minv[j]; j1=j; }
            }
            for(int j=0;j<=n;++j){ if(used[j]){ u[p[j]]+=delta; v[j]-=delta; } else minv[j]-=delta; }
            j0=j1;
            if(p[j0]==0) break;
        }
        while(true){
            int j1=way[j0]; p[j0]=p[j1]; j0=j1; if(j0==0) break;
        }
    }
    vector<int> ans(n,-1);
    for(int j=1;j<=n;++j) if(p[j]!=0) ans[p[j]-1]=j-1;
    return ans;
}
int main(){ return 0; }`
  },

  // 4
  {
    id: 4,
    title: "Industrial vs Residential Separation",
    desc: "Color blocks ensuring industries do not touch residential regions.",
    complexity: "O(V+E) ‚Äî graph bipartite check",
    sdgs: ["SDG 11: Sustainable Cities", "SDG 3: Good Health"],
    code: `// Graph bipartite check (BFS)
#include <bits/stdc++.h>
using namespace std;
bool is_bipartite(const vector<vector<int>>& g){
    int n = g.size(); vector<int> color(n, -1);
    for(int i=0;i<n;++i){
        if(color[i]!=-1) continue;
        queue<int> q; q.push(i); color[i]=0;
        while(!q.empty()){
            int u=q.front(); q.pop();
            for(int v: g[u]){
                if(color[v]==-1){ color[v]=color[u]^1; q.push(v); }
                else if(color[v]==color[u]) return false;
            }
        }
    }
    return true;
}
int main(){ return 0; }`
  },

  // 5
  {
    id: 5,
    title: "Public Park Placement Optimization",
    desc: "Select park sites to maximize population coverage using greedy + Fenwick Tree.",
    complexity: "O(k n log n)",
    sdgs: ["SDG 11: Sustainable Cities", "SDG 3: Good Health"],
    code: `// Fenwick Tree (Binary Indexed Tree)
#include <bits/stdc++.h>
using namespace std;
struct Fenwick{
    int n; vector<long long> bit;
    Fenwick(int n):n(n),bit(n+1,0){}
    void add(int idx, long long val){ for(++idx; idx<=n; idx += idx & -idx) bit[idx]+=val; }
    long long sum(int idx){ long long r=0; for(++idx; idx>0; idx -= idx & -idx) r+=bit[idx]; return r; }
    long long range_sum(int l,int r){ if(r<l) return 0; return sum(r) - (l? sum(l-1):0); }
};
int main(){ return 0; }`
  },

  // 6
  {
    id: 6,
    title: "Land Subdivision Optimization",
    desc: "Divide land into balanced subplots using recursive kd-like partitioning.",
    complexity: "O(n log n)",
    sdgs: ["SDG 11: Sustainable Cities", "SDG 15: Life on Land"],
    code: `// Polygon area via Shoelace
#include <bits/stdc++.h>
using namespace std;
double polygon_area(const vector<pair<double,double>>& poly){
    double s=0; int n=poly.size();
    for(int i=0;i<n;++i){
        double x1=poly[i].first, y1=poly[i].second;
        double x2=poly[(i+1)%n].first, y2=poly[(i+1)%n].second;
        s += x1*y2 - x2*y1;
    }
    return fabs(s)/2.0;
}
int main(){ return 0; }`
  },

  // 7
  {
    id: 7,
    title: "High Footfall Commercial Zone Prediction",
    desc: "Predict high footfall zones using clustering + movement density.",
    complexity: "O(nk) per iteration ‚Äî k-means like",
    sdgs: ["SDG 8: Decent Work & Economic Growth", "SDG 11: Sustainable Cities"],
    code: `// Simple clustering logic example (k-means like)
#include <bits/stdc++.h>
using namespace std;
using P = pair<double,double>;
vector<vector<P>> assign_clusters(const vector<P>& points, const vector<P>& centers){
    int k = centers.size(); vector<vector<P>> clusters(k);
    for(auto &p: points){
        int best = 0; double bestd = 1e300;
        for(int i=0;i<k;++i){ double d = pow(p.first-centers[i].first,2) + pow(p.second-centers[i].second,2); if(d<bestd){ bestd=d; best=i; } }
        clusters[best].push_back(p);
    }
    return clusters;
}
int main(){ return 0; }`
  },

  // 8
  {
    id: 8,
    title: "Creation of Green Belt Buffers",
    desc: "Use BFS/DFS layers to form multi-zone buffer around polluted areas.",
    complexity: "O(V+E)",
    sdgs: ["SDG 3: Good Health", "SDG 13: Climate Action"],
    code: `// BFS buffer layers on grid
#include <bits/stdc++.h>
using namespace std;
vector<vector<int>> buffer_layers(const vector<vector<int>>& grid, const vector<pair<int,int>>& sources){
    int n = grid.size(), m = grid[0].size();
    vector<vector<int>> dist(n, vector<int>(m, -1));
    deque<pair<int,int>> q;
    for(auto &s: sources){ dist[s.first][s.second]=0; q.push_back(s); }
    const int dr[4]={1,-1,0,0}; const int dc[4]={0,0,1,-1};
    while(!q.empty()){
        auto cur = q.front(); q.pop_front();
        int r=cur.first, c=cur.second;
        for(int k=0;k<4;++k){ int nr=r+dr[k], nc=c+dc[k];
            if(nr>=0 && nr<n && nc>=0 && nc<m && dist[nr][nc]==-1){ dist[nr][nc]=dist[r][c]+1; q.emplace_back(nr,nc); }
        }
    }
    return dist;
}
int main(){ return 0; }`
  },

  // 9
  {
    id: 9,
    title: "Footpath Connectivity Plan",
    desc: "Model nodes as junctions and compute shortest safe routes.",
    complexity: "Dijkstra ‚Äî O(E log V)",
    sdgs: ["SDG 11: Sustainable Cities", "SDG 3: Good Health"],
    code: `// Dijkstra Shortest Path
#include <bits/stdc++.h>
using namespace std;
unordered_map<int, long long> dijkstra(const unordered_map<int, vector<pair<int,long long>>>& graph, int start){
    unordered_map<int,long long> dist;
    for(auto &kv: graph) dist[kv.first] = LLONG_MAX;
    dist[start]=0;
    priority_queue<pair<long long,int>, vector<pair<long long,int>>, greater<pair<long long,int>>> pq;
    pq.push({0,start});
    while(!pq.empty()){
        auto [d,u] = pq.top(); pq.pop();
        if(d>dist[u]) continue;
        auto it = graph.find(u);
        if(it == graph.end()) continue;
        for(auto [v,w]: it->second){
            long long nd = d + w;
            if(nd < dist[v]){ dist[v]=nd; pq.push({nd,v}); }
        }
    }
    return dist;
}
int main(){ return 0; }`
  },

  // 10
  {
    id: 10,
    title: "Underground Utility Routing",
    desc: "Plan underground cables avoiding obstacles using A*.",
    complexity: "O(E log V)",
    sdgs: ["SDG 9: Industry & Infrastructure", "SDG 6: Clean Water & Sanitation"],
    code: `// A* Search on grid (Manhattan heuristic)
#include <bits/stdc++.h>
using namespace std;
int heuristic(pair<int,int> a, pair<int,int> b){ return abs(a.first-b.first) + abs(a.second-b.second); }
vector<pair<int,int>> astar(const vector<vector<int>>& grid, pair<int,int> start, pair<int,int> goal){
    int n = grid.size(), m = grid[0].size();
    using Node = tuple<int,int,int,int>; // f, g, r, c
    priority_queue<Node, vector<Node>, greater<Node>> open;
    map<pair<int,int>, pair<int,int>> came_from;
    map<pair<int,int>, int> gscore;
    open.push({heuristic(start,goal), 0, start.first, start.second});
    gscore[start]=0;
    const int dr[4]={1,-1,0,0}; const int dc[4]={0,0,1,-1};
    while(!open.empty()){
        auto [f,g,r,c] = open.top(); open.pop();
        pair<int,int> cur={r,c};
        if(cur==goal){
            vector<pair<int,int>> path; auto curp=cur;
            while(came_from.count(curp)){
                path.push_back(curp); curp = came_from[curp];
            }
            path.push_back(start);
            reverse(path.begin(), path.end());
            return path;
        }
        for(int k=0;k<4;++k){ int nr=r+dr[k], nc=c+dc[k];
            if(nr>=0 && nr<n && nc>=0 && nc<m && grid[nr][nc]!=1){
                pair<int,int> nxt={nr,nc}; int tentative = g + 1;
                if(!gscore.count(nxt) || tentative < gscore[nxt]){
                    gscore[nxt]=tentative;
                    came_from[nxt]=cur;
                    open.push({tentative + heuristic(nxt,goal), tentative, nr, nc});
                }
            }
        }
    }
    return {};
}
int main(){ return 0; }`
  },

  // 11
  {
    id: 11,
    title: "Waste Collection Route Optimization",
    desc: "Minimize distance for garbage trucks using VRP heuristics.",
    complexity: "NP-hard ‚Äî heuristics",
    sdgs: ["SDG 11: Sustainable Cities", "SDG 12: Responsible Consumption"],
    code: `// Simple savings heuristic (CVRP-like) example
#include <bits/stdc++.h>
using namespace std;
int main(){ /* placeholder for VRP heuristic */ return 0; }`
  },

  // 12
  {
    id: 12,
    title: "Stormwater Drainage Catchment",
    desc: "Identify catchment basins using flood-fill and elevation data.",
    complexity: "O(n) on grid",
    sdgs: ["SDG 6: Clean Water & Sanitation", "SDG 11: Sustainable Cities"],
    code: `// Flood-fill basins on grid
#include <bits/stdc++.h>
using namespace std;
int main(){ return 0; }`
  },

  // 13
  {
    id: 13,
    title: "Public Transport Timetable Sync",
    desc: "Align timetables to minimize passenger waiting using scheduling.",
    complexity: "O(n log n)",
    sdgs: ["SDG 11: Sustainable Cities", "SDG 8: Decent Work"],
    code: `// Greedy schedule alignment example
#include <bits/stdc++.h>
using namespace std;
int main(){ return 0; }`
  },

  // 14
  {
    id: 14,
    title: "Emergency Evacuation Planning",
    desc: "Compute multi-source shortest paths and capacity-limited flows.",
    complexity: "O(E log V)",
    sdgs: ["SDG 11: Sustainable Cities", "SDG 3: Good Health"],
    code: `// Multi-source Dijkstra
#include <bits/stdc++.h>
using namespace std;
int main(){ return 0; }`
  },

  // 15
  {
    id: 15,
    title: "Bicycle Lane Network Design",
    desc: "Select edges to maximize connectivity under budget constraints.",
    complexity: "O(E log V)",
    sdgs: ["SDG 11: Sustainable Cities", "SDG 3: Good Health"],
    code: `// Minimum spanning forest + budget constraint
#include <bits/stdc++.h>
using namespace std;
int main(){ return 0; }`
  },

  // 16
  {
    id: 16,
    title: "Air Quality Hotspot Detection",
    desc: "Detect hotspots using spatial smoothing and thresholding.",
    complexity: "O(n log n)",
    sdgs: ["SDG 3: Good Health", "SDG 11: Sustainable Cities"],
    code: `// Spatial smoothing kernel example
#include <bits/stdc++.h>
using namespace std;
int main(){ return 0; }`
  },

  // 17
  {
    id: 17,
    title: "Energy Consumption Clustering",
    desc: "Cluster buildings by usage patterns for targeted retrofits.",
    complexity: "O(nk) per iteration",
    sdgs: ["SDG 7: Affordable & Clean Energy", "SDG 11: Sustainable Cities"],
    code: `// K-means-like clustering on time-series
#include <bits/stdc++.h>
using namespace std;
int main(){ return 0; }`
  },

  // 18
  {
    id: 18,
    title: "Streetlight Placement Optimization",
    desc: "Cover pedestrian paths with minimal poles using greedy set cover.",
    complexity: "O(n log n) greedy",
    sdgs: ["SDG 11: Sustainable Cities", "SDG 7: Energy"],
    code: `// Greedy set-cover approximate
#include <bits/stdc++.h>
using namespace std;
int main(){ return 0; }`
  },

  // 19
  {
    id: 19,
    title: "Healthcare Accessibility Indexing",
    desc: "Compute accessibility scores using distance decay functions.",
    complexity: "O(n log n)",
    sdgs: ["SDG 3: Good Health", "SDG 10: Reduced Inequalities"],
    code: `// Distance-decay indexing
#include <bits/stdc++.h>
using namespace std;
int main(){ return 0; }`
  },

  // 20
  {
    id: 20,
    title: "Green Roof Candidate Selection",
    desc: "Rank rooftops by benefit/cost using greedy ranking.",
    complexity: "O(n log n)",
    sdgs: ["SDG 11: Sustainable Cities", "SDG 13: Climate Action"],
    code: `// Ranking rooftop candidates
#include <bits/stdc++.h>
using namespace std;
int main(){ return 0; }`
  },

  // 21
  {
    id: 21,
    title: "Water Pressure Optimization",
    desc: "Tune pump placements and pipe diameters to reduce head loss.",
    complexity: "Simulation + optimization",
    sdgs: ["SDG 6: Clean Water & Sanitation", "SDG 9: Industry & Infrastructure"],
    code: `// Simple hydraulic simulation placeholder
#include <bits/stdc++.h>
using namespace std;
int main(){ return 0; }`
  },

  // 22
  {
    id: 22,
    title: "Electric Grid Load Balancing",
    desc: "Balance supply/demand using flow and matching techniques.",
    complexity: "O(E log V)",
    sdgs: ["SDG 7: Affordable & Clean Energy", "SDG 9: Industry & Infrastructure"],
    code: `// Load balancing skeleton
#include <bits/stdc++.h>
using namespace std;
int main(){ return 0; }`
  },

  // 23
  {
    id: 23,
    title: "Noise Pollution Mapping",
    desc: "Interpolate sensor readings to produce city-level maps.",
    complexity: "O(n log n)",
    sdgs: ["SDG 3: Good Health"],
    code: `// IDW interpolation example
#include <bits/stdc++.h>
using namespace std;
int main(){ return 0; }`
  },

  // 24
  {
    id: 24,
    title: "Last-mile Logistics Optimization",
    desc: "Optimize parcels routing with capacity and time windows.",
    complexity: "NP-hard ‚Äî heuristics",
    sdgs: ["SDG 11: Sustainable Cities", "SDG 8: Decent Work"],
    code: `// Time-window routing placeholder
#include <bits/stdc++.h>
using namespace std;
int main(){ return 0; }`
  },

  // 25
  {
    id: 25,
    title: "Public Wi-Fi Placement",
    desc: "Place access points for max coverage and throughput.",
    complexity: "O(n log n)",
    sdgs: ["SDG 9: Industry & Infrastructure", "SDG 11: Sustainable Cities"],
    code: `// Greedy coverage for AP placement
#include <bits/stdc++.h>
using namespace std;
int main(){ return 0; }`
  },

  // 26
  {
    id: 26,
    title: "Tree Canopy Expansion Strategy",
    desc: "Select planting locations maximizing canopy overlap reduction.",
    complexity: "Greedy + spatial indexing",
    sdgs: ["SDG 11: Sustainable Cities", "SDG 15: Life on Land"],
    code: `// Spatial index + greedy planting
#include <bits/stdc++.h>
using namespace std;
int main(){ return 0; }`
  },

  // 27
  {
    id: 27,
    title: "Shared Micro-mobility Rebalancing",
    desc: "Rebalance scooter/bike fleets minimizing truck distance.",
    complexity: "Heuristic rebalancing",
    sdgs: ["SDG 11: Sustainable Cities", "SDG 8: Decent Work"],
    code: `// Fleet rebalancing skeleton
#include <bits/stdc++.h>
using namespace std;
int main(){ return 0; }`
  },

  // 28
  {
    id: 28,
    title: "Urban Heat Island Modeling",
    desc: "Model hotspots using landcover and surface temperature indices.",
    complexity: "O(n log n)",
    sdgs: ["SDG 13: Climate Action", "SDG 11: Sustainable Cities"],
    code: `// Heat index composition example
#include <bits/stdc++.h>
using namespace std;
int main(){ return 0; }`
  },

  // 29
  {
    id: 29,
    title: "Flood Early Warning System",
    desc: "Combine rainfall forecasts and drainage capacity for alerts.",
    complexity: "O(n)",
    sdgs: ["SDG 11: Sustainable Cities", "SDG 3: Good Health"],
    code: `// Simplified flood alert logic
#include <bits/stdc++.h>
using namespace std;
int main(){ return 0; }`
  },

  // 30
  {
    id: 30,
    title: "Urban Biodiversity Corridor Design",
    desc: "Connect patches to improve species movement using graph metrics.",
    complexity: "O(E log V)",
    sdgs: ["SDG 15: Life on Land", "SDG 11: Sustainable Cities"],
    code: `// Corridor connectivity via MST + centrality
#include <bits/stdc++.h>
using namespace std;
int main(){ return 0; }`
  }
];

/* ----------------------------------------------------
   DOM refs & helpers
---------------------------------------------------- */
const problemsGrid = document.getElementById('problemsGrid');
const quickJump = document.getElementById('quickJump');
const sdgFiltersEl = document.getElementById('sdgFilters');
const countEl = document.getElementById('count');
const searchInput = document.getElementById('searchInput');
const sidebar = document.getElementById('sidebar');
const hamburger = document.getElementById('hamburger');
const closeSidebarBtn = document.getElementById('closeSidebarBtn');
const overlay = document.getElementById('overlay');
const detailPanel = document.getElementById('detailPanel');
const detailTitle = document.getElementById('detailTitle');
const detailDesc = document.getElementById('detailDesc');
const detailSdgs = document.getElementById('detailSdgs');
const detailComplexity = document.getElementById('detailComplexity');
const detailCodeInner = document.getElementById('detailCodeInner');
const closeDetail = document.getElementById('closeDetail');

/* small helper */
function escapeHtml(s){
  return String(s)
    .replace(/&/g,'&amp;')
    .replace(/</g,'&lt;')
    .replace(/>/g,'&gt;');
}

/* preview code (first two lines) */
function previewCode(codeStr){
  const lines = String(codeStr||'')
    .split('\\n')
    .map(l=>l.replace(/\\t/g,'    ').trim())
    .filter(l => l.length > 0);
  let out = lines.slice(0,3).join(' ‚∏± ');
  if(out.length > 140) out = out.slice(0,137) + '...';
  return escapeHtml(out) || '';
}

/* create a visual card for grid */
function createGridCard(p){
  const wrap = document.createElement('article');
  wrap.className = 'card';
  wrap.setAttribute('data-id', p.id);
  wrap.setAttribute('role','button');
  wrap.setAttribute('tabindex','0');

  const left = document.createElement('div');
  left.className = 'card-left';
  // choose an icon emoji by id simple mapping
  const icons = ['üè•','üè´','üÖøÔ∏è','üè≠','üå≥','üìê','üè¨','üåø','üö∂','üîå','üöõ','üåßÔ∏è','üöå','üö®','üö≤','üå´Ô∏è','‚ö°','üí°','ü©∫','üå±','üíß','‚ö°','üîä','üöö','üì∂','üå≤','üõ¥','üî•','üåä','ü¶ã'];
  left.innerText = icons[(p.id-1) % icons.length] || 'üìå';

  const body = document.createElement('div');
  body.className = 'card-body';
  const h3 = document.createElement('h3');
  h3.innerText = `${p.id}. ${p.title}`;
  const pdesc = document.createElement('p');
  pdesc.innerText = p.desc;
  const tags = document.createElement('div');
  tags.className = 'tags';
  (p.sdgs || []).slice(0,3).forEach(s => {
    const t = document.createElement('span');
    t.className = 'tag';
    t.innerText = s.replace(/^SDG\s*\d+:\s*/,'');
    tags.appendChild(t);
  });

  const right = document.createElement('div');
  right.className = 'card-right';
  right.innerHTML = previewCode(p.code);

  body.appendChild(h3);
  body.appendChild(pdesc);
  body.appendChild(tags);

  wrap.appendChild(left);
  wrap.appendChild(body);
  wrap.appendChild(right);

  // click / keyboard opens detail panel
  function open(){
    openDetail(p.id);
  }
  wrap.addEventListener('click', open);
  wrap.addEventListener('keydown', (ev) => {
    if(ev.key === 'Enter' || ev.key === ' ') open();
  });

  return wrap;
}

/* render grid from list */
function renderGrid(list){
  problemsGrid.innerHTML = '';
  const frag = document.createDocumentFragment();
  list.forEach(p => frag.appendChild(createGridCard(p)));
  problemsGrid.appendChild(frag);
  countEl.innerText = `${list.length} items`;
}

/* open detail panel on right */
function openDetail(id){
  const p = problems.find(x => x.id === id);
  if(!p) return;
  detailTitle.innerText = `${p.id}. ${p.title}`;
  detailDesc.innerText = p.desc;
  detailComplexity.innerText = p.complexity;
  detailSdgs.innerHTML = '';
  (p.sdgs || []).forEach(s => {
    const sp = document.createElement('span');
    sp.className = 'tag';
    sp.style.background = 'rgba(2,6,23,0.04)';
    sp.style.color = 'var(--muted-2)';
    sp.innerText = s;
    detailSdgs.appendChild(sp);
  });
  // set code safely
  detailCodeInner.textContent = p.code;
  try { Prism.highlightElement(detailCodeInner); } catch(e){}
  // show panel
  detailPanel.style.transform = 'translateX(0%)';
  detailPanel.style.opacity = '1';
}

/* close detail */
closeDetail.addEventListener('click', () => {
  detailPanel.style.transform = 'translateX(110%)';
  detailPanel.style.opacity = '0';
});

/* SEARCH & FILTER logic */
function filter(term){
  const t = String(term || '').trim().toLowerCase();
  if(!t){
    renderGrid(problems);
    return;
  }
  const out = problems.filter(p => {
    const sdgText = (p.sdgs || []).join(' ');
    const s = `${p.id} ${p.title} ${p.desc} ${p.complexity} ${sdgText}`.toLowerCase();
    return s.includes(t);
  });
  renderGrid(out);
}

/* debounce */
function debounce(fn, wait=180){
  let t;
  return (...args) => {
    clearTimeout(t);
    t = setTimeout(()=>fn(...args), wait);
  };
}

/* QUICK JUMP & SDG filter UI */
function buildQuickJump(){
  quickJump.innerHTML = '';
  problems.forEach(p => {
    const b = document.createElement('button');
    b.textContent = `${p.id}`;
    b.style.padding = '6px 8px';
    b.style.borderRadius = '8px';
    b.style.border = '1px solid rgba(2,6,23,0.04)';
    b.style.background = '#fff';
    b.style.cursor = 'pointer';
    b.addEventListener('click', ()=> openDetail(p.id));
    quickJump.appendChild(b);
  });
}
function buildSdgs(){
  // gather unique sdgs
  const set = new Set();
  problems.forEach(p => (p.sdgs || []).forEach(s => set.add(s)));
  sdgFiltersEl.innerHTML = '';
  Array.from(set).sort().forEach(s => {
    const btn = document.createElement('button');
    btn.className = 'tag';
    btn.style.background = 'rgba(2,6,23,0.04)';
    btn.style.color = 'var(--muted-2)';
    btn.style.cursor = 'pointer';
    btn.innerText = s;
    btn.addEventListener('click', ()=>{
      filter(s.split(':')[0]); // filter by 'SDG X'
    });
    sdgFiltersEl.appendChild(btn);
  });
}

/* SIDEBAR open/close (mobile) */
function openSidebar(){
  sidebar.classList.add('open');
  overlay.classList.add('visible');
  closeSidebarBtn.style.display = 'inline-flex';
  overlay.setAttribute('aria-hidden','false');
}
function closeSidebar(){
  sidebar.classList.remove('open');
  overlay.classList.remove('visible');
  closeSidebarBtn.style.display = 'none';
  overlay.setAttribute('aria-hidden','true');
}
hamburger.addEventListener('click', openSidebar);
closeSidebarBtn.addEventListener('click', closeSidebar);
overlay.addEventListener('click', closeSidebar);

/* INIT render */
renderGrid(problems);
buildQuickJump();
buildSdgs();

/* Search binding */
searchInput.addEventListener('input', debounce((e)=>{
  filter(e.target.value);
}));

/* Reset button */
document.getElementById('resetBtn').addEventListener('click', ()=>{
  searchInput.value = '';
  renderGrid(problems);
});

/* window resize handler to hide sidebar button */
function handleResize(){
  if(window.matchMedia && window.matchMedia('(max-width: 980px)').matches){
    closeSidebarBtn.style.display = 'none';
  } else {
    sidebar.classList.remove('open');
    overlay.classList.remove('visible');
    closeSidebarBtn.style.display = 'none';
  }
}
window.addEventListener('resize', handleResize);
handleResize();

/* keyboard accessibility: navigate cards by arrow keys */
document.addEventListener('keydown', (ev) => {
  if(['ArrowDown','ArrowUp'].indexOf(ev.key) === -1) return;
  const cards = Array.from(document.querySelectorAll('.card'));
  if(cards.length === 0) return;
  let idx = cards.findIndex(c => c.classList.contains('focus'));
  if(idx === -1) idx = (ev.key === 'ArrowDown') ? -1 : 0;
  if(ev.key === 'ArrowDown') idx = Math.min(cards.length - 1, idx + 1);
  if(ev.key === 'ArrowUp') idx = Math.max(0, idx - 1);
  const next = cards[idx];
  if(next){
    cards.forEach(c=>c.classList.remove('focus'));
    next.classList.add('focus');
    try { next.scrollIntoView({block:'nearest', behavior:'smooth'}); } catch(e){}
    next.focus();
  }
});
</script>

</body>
</html>
